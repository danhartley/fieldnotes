<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Paths through the forest are without number</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="icon" href="./favicon.ico" />
    <script src="./ui-writer.js" type="module"></script>
  </head>

  <body>  
    <header>
      <h1>Learn the planet</h1>
    </header>

    <main class="mt2">
      <fieldset class="fieldset-reset">
        <legend class="hidden">Preview or edit fieldnotes</legend>
        <section>
          <div class="section-header section-group">
            <h2>              
              <input id="edit-ctrl-input-radio" type="radio" name="author-mode" value="edit" checked>
              <label for="edit-ctrl-input-radio">
                Edit mode
              </label>
            </h2>
          </div>        
        </section> 
        <section>
          <div class="section-header section-group">
            <h2>              
              <input id="preview-ctrl-input-radio" type="radio" name="author-mode" value="preview">
              <label for="preview-ctrl-input-radio">
                Preview mode
              </label>
            </h2>
          </div>      
        </section>       
      </fieldset>

      <section>
        <fieldset class="mt2">
          <legend>iNaturalist settings</legend>
          <p class="mt0 small">If you are using iNaturalist observations, filter by user account and the date of your field trip.</p>
          <div class="centred-block">
              <label for="inat-autocomplete-input-text">User</label>
              <input id="inat-autocomplete-input-text" list="inat-autocomplete-data-list" type="text" class="p" autocomplete="off" spellcheck="false" placeholder="Start typing a username or user ID…">
              <datalist id="inat-autocomplete-data-list"></datalist>
          </div>
          <!-- <div id="inat-params-input-check-box-group" class="grid mt2"></div> -->
          <div class="centred-block mt2">
            <label for="observations-date">Date</label>
            <input type="date" id="observations-date" name="observations-date" class="mr" />
          </div>

          <div class="centred-block mt2">
            <button id="fetch-inat-species-btn" class="submit mr disabled">Search iNaturalist for observations </button>
            <div id="fetch-inat-species-notification-text" class="small hidden">Waiting for response from iNaturalist…</div>
          </div>
        </fieldset>
      </section>

      <section>
        <fieldset>
          <legend>Edit existing field trip</legend>
          <p class="mt0 small">Find field notes to edit.</p>
          <div class="centred-block">
              <label for="ltp-autocomplete-title-input-text">Title</label>
              <input id="ltp-autocomplete-title-input-text" list="ltp-autocomplete-title-data-list" type="text" class="p" autocomplete="off" spellcheck="false" placeholder="Start typing the title of your field notes…">
              <datalist id="ltp-autocomplete-title-data-list"></datalist>
          </div>
          <div id="field-notes-lookup-callback-parent" class="mt2"></div>
          
          <button id="fetch-fieldtrip-btn" class="mt2 disabled">Import field trip</button>
        </fieldset>
      </section>

      <article id="edit-view">
        <section id="meta-data-section">
          <fieldset>
            <legend>Field trip overview</legend>
            <div class="small mb2">If you are using iNaturalist observations, this information is derived from your field trip.</div>
            <div class="centred-block">
              <label for="author-input-text">Author</label>      
              <input id="author-input-text" type="text" class="p" autocomplete="off">
            </div>
            <div class="centred-block mt2">
              <label for="date-input-text">Date</label>      
              <input id="date-input-text" type="text" class="p" autocomplete="off">
            </div>
            <div class="centred-block mt2">
              <label for="place-input-text">Place</label>      
              <input id="place-input-text" type="text" class="p" autocomplete="off">
            </div>
          </fieldset>
        </section>

        <section>    
          <fieldset>
            <legend>Title</legend>
              <div class="small mb2">It helps others if the title you choose is specific to your field trip.</div>
              <div class="centred-block">
                <label for="title-input-text">Title</label>      
                <input id="title-input-text" type="text" class="p" autocomplete="off" placeholder="e.g. Simien Mountains National Park January 27 2020">
              </div>
          </fieldset>
        </section>

        <section id="select-section-type-section">
          <fieldset>
            <legend>Add a new section</legend>
            <div class="small mb2">Observations are the photos you took on your field trip. Species are the default species photos from iNaturalist.</div>            
            <button id="h3-input" type="button" value="h3-input" class="mb">Header</button>
            <button id="h4-input" type="button" value="h4-input" class="mb">Subheader</button>
            <button id="textarea" type="button" value="textarea" class="mb">Text block</button>
            <button id="observations" type="button" value="observations" class="mb disabled">Observations</button>
            <button id="species" type="button" value="species" class="mb disabled">Species</button>
            <button id="inat-lookup" type="button" value="inat-lookup" class="mb">iNat species lookup</button>
            <button id="images" type="button" value="images" class="mb">Context photos</button>
            <button id="terms" type="button" value="terms" class="mb">Terms</button>
            <button id="birdsong-input" type="button" value="birdsong-input" class="mb">Birdsong</button>
            <div class="small mt2"><em>You can create multiple sections of each type, and change their order.</em></div>
          </fieldset>
        </section>

        <div id="draggable-sections"></div>

        <section>
          <fieldset>
            <legend>Save your field notes</legend>
            <div class="small mt">Save your field notes to the database.</div>
            <button id="save-field-notes-btn" class="mt2 p disabled">Save field notes</button>
          </fieldset>
        </section>
      </article>

      <article id="preview-view" class="hidden">
        Preview mode…
      </article>
    </main>

    <!-- Add templates -->

    <template id="checkbox-template">
      <div class="flex-row">                  
        <input type="checkbox" id="" />
        <label for=""></label>
      </div>
    </template>

    <template id="section-template">
      <section draggable="true" class="draggable">
        <fieldset class="mt2">
          <legend></legend>
          <div></div>      
          <button id="add-section-btn" class="small mt2 disabled add">Add section</button>
          <button id="edit-section-btn" class="small mt2 edit hidden">Edit section</button>
          <button id="delete-section-btn" class="small mt2 edit">Delete section</button>
        </fieldset>
      </section>
    </template>

    <template id="section-include-template">
      <section draggable="true" class="draggable">
        <fieldset class="mt2 species-list">
          <legend></legend>
          <button id="show-include-only-btn">Show only included</button>
          <div></div>      
          <button id="delete-section-btn" class="small mt2 edit">Delete section</button>
        </fieldset>
      </section>
    </template>

    <template id="h3-input-template">
      <input type="text" class="p add" />
      <div class="edit hidden"></div>
    </template>
    
    <template id="h4-input-template">
      <input type="text" class="p add" />
      <div class="edit hidden"></div>
    </template>

    <template id="birdsong-input-template">
      <div class="small mb2">You can embed recordings from <a href="https://xeno-canto.org/" target="_blank">xeno-canto</a>.</div>
      <input type="text" class="p add" placeholder="Enter a xeno-canto recording id e.g. 121910" />
      <div class="edit hidden"></div>
    </template>

    <template id="inat-lookup-template">
      <p class="mt0 small">Look up taxa on iNaturalist.</p>
      <div class="centred-block">
          <label for="">Taxa</label>
          <input id="" list="" type="text" class="p" autocomplete="off" spellcheck="false" placeholder="Start tying the common or scientific name…">
          <datalist id=""></datalist>
      </div>
      <div id="inat-lookup-callback-parent" class="mt2"></div>
    </template>
    
    <template id="textarea-template">
      <textarea type="textarea" class="p add" rows="10"></textarea>
      <div class="edit hidden"></div>
    </template>

    <template id="terms-template">
      <div id="terms" class="add">
        <div class="box">
          <div class="centred-block mb2">
            <label for="">Term</label>
            <input name="" id="" spellcheck="false" autocomplete="off" placeholder="Start typing a term…" class="p" type="text"></input>
            <datalist id=""></datalist>  
          </div>
          <div id="selected-term">
            <div class="centred-block double-height mb">
              <span>Term</span><span>---</span>
            </div>
            <div class="centred-block double-height mb">
              <span>Definition</span><span>---</span>
            </div>
            <div class="centred-block mb">
              <span>Source</span><span>---</span>
            </div>
            <div class="centred-block mb">
              <span>Author</span><span>---</span>
            </div>
            <div class="centred-block mb">
              <span>Examples</span><span>---</span>
            </div>
          </div>
        </div>
        <button id="add-selected-term-btn" class="small disabled add mt">Add selected term</button>
        <div class="mt2 mb2 small">Select an exisiting term, <em>or create a new one…</em></div>
        <div class="box">
          <div class="centred-block mb">
            <label for="input-dt">Term</label>
            <input id= "input-dt" type="text" class="p">
            <datalist id="autocomplete-term-list"></datalist>
          </div>
          <div class="centred-block mb">
            <label for="input-dd">Definition</label>
            <textarea name="" id="input-dd" rows="3"></textarea>
          </div>
          <div class="centred-block mb">
            <label for="input-ds">Source</label>
            <input id= "input-ds" type="text" class="p">
          </div>
          <div class="centred-block mb">
            <label for="input-da">Author</label>
            <input id= "input-da" type="text" class="p">
          </div>
          <div class="centred-block mb">
            <label for="input-dx">Examples</label>
            <input id= "input-dx" type="text" class="p">
          </div>
        </div>
        <button id="add-new-term-btn" class="small disabled add mt">Add new term</button>
      </div>
      <ul id="selected-terms-list" class="pt small add edit">
        <li><em>Please select or create a term for this section.</em></li>
      </ul>
    </template>

    <template id="images-template">
      <div class="small">Add up to 3 photos per section</div>
      <div class="centred-block mt2">
        <label for="image-url-input-one">1 Link</label>
        <input id="image-url-input-one" placeholder="Insert the link to your photo here" class="p" type="text" data-key="src"></input>
      </div>
      <div class="centred-block mt">
        <label for="image-title-input-one">1 Title</label>
        <input id="image-title-input-one" placeholder="Insert a title for your photo here" class="p" type="text" minlength="2" maxlength="60" data-key="alt"></input>
      </div>
      <div class="centred-block mt2">
        <label for="image-url-input-two">2 Link</label>
        <input id="image-url-input-two" placeholder="e.g. https://drive.google.com/thumbnail?id={photo id 2}" class="p" type="text" data-key="src"></input>
      </div>
      <div class="centred-block mt">
        <label for="image-title-input-two">2 Title</label>
        <input id="image-title-input-two" placeholder="Minium 2 characters, maximum 60 characters in length" class="p" type="text" minlength="2" maxlength="60" data-key="alt"></input>
      </div>
      <div class="centred-block mt2">
        <label for="image-url-input-three">3 Link</label>
        <input id="image-url-input-three" placeholder="e.g. https://drive.google.com/thumbnail?id={photo id 3}" class="p" type="text" data-key="src"></input>
      </div>
      <div class="centred-block mt">
        <label for="image-title-input-three">3 Title</label>
        <input id="image-title-input-three" placeholder="e.g. Mount Ras Dashen, Simien Mountains" class="p" type="text" minlength="2" maxlength="60" data-key="alt"></input>
      </div>
      <div class="edit hidden"></div>
    </template>

    <!-- Preview templates -->

    <template id="h3-template">
      <h3></h3>
    </template>

    <template id="h4-template">
      <h4></h4>
    </template>

    <template id="xenocanto-template">
      <input type="text" class="p" />
    </template>

    <template id="text-template">      
      <p></p>
    </template>

    <template id="observations-template">      
      <div></div>
    </template>

    <template id="species-template">      
      <div></div>
    </template>

    <template id="img-template">
      <figure class="centred-block small">
        <img src="" alt="" width="75px" height="75px" class="mr">
        <div class="flex-columns">
          <span class="text-left mb05"></span>
          <span class="text-left mb05"></span>
          <div class="centred-block">
            <input type="checkbox" id="" name="" />
            <label for="">Include</label>
          </div>
        </div>
      </figure>
    </template>
  </body>

  </html>